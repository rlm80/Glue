---
layout: base
title: Guide
---

Prerequisites : <a href="/Glue/file_system.html#create_new_class">creating a new user class</a>.

<h2>Defining database connections</h2>

<p>A database connection is created by defining a new database class, and registering it in the connections array with its identifier.</p>

<h3>Defining a new database class</h3>

<p>A database class is defined by creating a new user class that extends either <span class="inline_code">\Glue\DB\Database_MySQL</span>, <span class="inline_code">\Glue\DB\Database_PostgreSQL</span> or <span class="inline_code">\Glue\DB\Database_SQLite</span>. You must create one database class by database connection.</p>

<p>Suppose you want to work with two database connections : your main database powered by SQLite and a MySQL database with a forum. You would create two classes (the class names don't matter) :</p>

{% highlight php %}
<?php  
  // File classes/user/db/database/mysql/main.php

  namespace Glue\User\DB;

  class Database_SQLite_Main extends \Glue\DB\Database_SQLite {
    protected $path = '...';
  }  
?>
{% endhighlight %}

{% highlight php %}
<?php
  // File classes/user/db/database/mysql/forum.php

  namespace Glue\User\DB;

  class Database_MySQL_Forum extends \Glue\DB\Database_MySQL {
    protected $username = '...';
    protected $password = '...';
    protected $dbname = '...';
  }
?>
{% endhighlight %}

<h3>Registering a database class in the connections array</h3>

<p>Database classes must be registered in the connections array with their identifiers so that the library knows about them. An identifier is a name that can be used to refer to a database connection, for example to issue queries to it. This must be done in the Config class.</p>

<p>To register the two database classes above, you would do the following :</p>

{% highlight php %}
<?php
  // File classes/user/db/config.php

  namespace Glue\User\DB;

  class Config extends \Glue\System\DB\Config {
    protected function __construct() {
      parent::__construct();
	  
	  // Options :
      $this->connections = array(
          'main'  => 'Glue\\DB\\Database_SQLite_Main',
          'forum' => 'Glue\\DB\\Database_MySQL_Forum',
        );
	  
    }
  }
?>
{% endhighlight %}















