---
layout: base
title: Guide
---

<h2>Group by</h2>

<p>Factory : <span class="inline_code">DB::groupby()</span></p>

<p>Represents a comma separated list of SQL expressions : <span class="inline_code">("mytable"."mycolumn1" + "mytable"."mycolumn2" * 3), "mytable"."mycolumn3", ...</span></p>

<h3>Item class</h3>

<p>Item : <a class="external" href="https://github.com/rlm80/Glue/tree/master/classes/system/db/fragment/item/groupby.php"><span class="inline_code">Fragment_Item_Groupby</span></a></p>

<p>The item has one property (a fragment) and one method : <span class="inline_code">-&gt;grouped()</span>, the fragment getter/setter.</p>

<h3>Builder class</h3>

<p>Builder : <a class="external" href="https://github.com/rlm80/Glue/tree/master/classes/system/db/fragment/builder/groupby.php"><span class="inline_code">Fragment_Builder_Groupby</span></a></p>

<p>The builder has only one method (returns <span class="inline_code">$this</span>) : <span class="inline_code">-&gt;groupby()</span>. It adds a list of SQL expressions to the group by. It can take any number of parameters, each of them can be either a string of pseudo SQL or a fragment.</p>

<h3>Examples</h3>

{% highlight php %}
<?php

  use Glue\DB\DB;

  // Create fragment :
  $f = db::groupby("(`column1` + `column2` * 5)")->groupby("`column2`", "`column3`");
  
  // Output SQL :
  echo db::cn()->compile( $f ); // Prints ("column1" + "column2" * 5), "column2", "column3"
  
  // Usage with table fragment :
  $t = db::table('mytable', 'myalias');
  $f = db::groupby("($t->column1 + $t->column2 * 5)")->groupby($t->column2, $t->column3);
  
  // Output SQL : 
  echo db::cn()->compile( $f );  
  
  // ("myalias"."column1" + "myalias"."column2" * 5), "myalias"."column2", "myalias"."column3"
?>
{% endhighlight %}