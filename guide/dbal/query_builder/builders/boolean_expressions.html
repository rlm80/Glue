---
layout: base
title: Guide
---

<h2>Boolean expressions</h2>

<p>Factory : <span class="inline_code">DB::bool()</span></p>

<p>Represents a list of boolean operands, parentheses enclosed, connected by boolean operators : <span class="inline_code">(1=1) AND ('this'='that') OR ...</span></p>

<h3>Items</h3>

<p>Class : <a class="external" href="https://github.com/rlm80/Glue/tree/master/classes/system/db/fragment/item/bool.php"><span class="inline_code">Fragment_Item_Bool</span></a></p>

<p>The item is an operator-operand pair. The operator can be either <span class="inline_code">DB::_OR</span> or <span class="inline_code">DB::_AND</span>, and the operand can be any fragment. It has 2 methods :</p>

<ul>
  <li><span class="inline_code">->operator()</span> : operator getter/setter,</li>
  <li><span class="inline_code">->operand()</span> : operand getter/setter.</li>
</ul>

<h3>Builders</h3>

<p>Class : <a class="external" href="https://github.com/rlm80/Glue/tree/master/classes/system/db/fragment/builder/bool.php"><span class="inline_code">Fragment_Builder_Bool</span></a></p>

<p>The builder has 4 methods, they all return <span class="inline_code">$this</span> :</p>

<ul>
  <li><span class="inline_code">->init()</span> : removes all items and initialize the expression with a first item (no operator),</li>
  <li><span class="inline_code">->and()</span> : adds a new item with AND operator (no operator if list is still empty),</li>
  <li><span class="inline_code">->or()</span> : adds a new item with OR operator (no operator if list is still empty),</li>
  <li><span class="inline_code">->not()</span> : toggles negation of the expression.</li>
</ul>

<p>The methods <span class="inline_code">init()</span>, <span class="inline_code">and()</span> and <span class="inline_code">or()</span> take the same parameters as <span class="inline_code">DB::tpl()</span>, that is, a string of pseudo SQL, followed by a list of replacements. Alternatively, they also accept a single fragment parameter. Calling the factory method is the same as creating a new object and calling <span class="inline_code">init()</span>.</p>

<h3>Exemples</h3>

{% highlight php %}
<?php

  use Glue\DB\DB;

  // Create fragment :
  $f = db::bool("`column` = ?", "test")->and("1=?", 1)->or("2=2");
  
  // Output SQL :
  echo db::cn()->compile( $f ); // ("column" = 'test') AND (1=1) OR (2=2)
  
  // Nested boolean expressions and negation :
  $f = db::bool("1=1")->and($nested = db::bool());
  $nested->init("2=2")->and("3=3")->not();
  
  // Output SQL :
  echo db::cn()->compile( $f ); // (1=1) AND NOT ((2=2) OR (3=3))
  
  // Other ways of writing the same boolean expression :
  $f = db::bool("1=1")->and( db::bool("2=2")->and("3=3")->not() );
  $f = db::bool("1=1 AND NOT ?", db::bool("2=2")->and("3=3") );
?>
{% endhighlight %}