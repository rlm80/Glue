---
layout: base
title: Guide
---

<h2>Query builder</h2>

<p>A query builder is a system that makes it possible to build SQL queries bits by bits, in no particular order :</p>

{% highlight php %}
<?php

  use Glue\DB\DB;

  // Base query :
  $query = db::select('users', $u)->where("$u->login = ?", 'Mike')->columns($u->login);
  
  // Adds a join :
  $query->left('profiles', $p)->on("$p->id = $u->id")->columns($p->email);
  
  // Compile against default connection to view generated SQL :
  $sql = db::cn()->compile($query);
?>
{% endhighlight %}

<p>It works by representing the query as a data structure rather than a string, so that it can be easily modified. Once the data structure is ready, it can be compiled into an SQL string according to the SQL dialect of the underlying RDBMS.</p>

<h3>Query builder : the point</h3>

<p>Such a system comes in handy if you need dynamic queries - queries that are assembled at runtime according to some logic.</p>

<p>To some extent, it also provides database independence by automatically quoting values and identifiers, generating the right SQL constructs for LIMIT and OFFSET, or dealing with SQL function and operator naming discrepancies between various database vendors.</p>

<p>If neither of those are a requirement for what you're doing, you'll be better off using straight SQL.</p>