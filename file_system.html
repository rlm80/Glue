---
layout: base
title: Guide
---

Prerequisites : <a class="external" href="http://php.net/manual/en/language.oop5.autoload.php">class autoloading</a>, <a class="external" href="http://php.net/manual/en/language.namespaces.php">namespaces</a>, <a class="external" href="http://be2.php.net/manual/en/function.class-alias.php">class_alias</a>.

<h2>File system structure</h2>

<p><span class="inline_code">bootstrap.php</span> is the file is that must be included in order to use the library. The classes are located in the <span class="inline_code">classes</span> directory, one class per file.</p>

<pre>
+--glue/
     +--classes/
     |    +--db/
     | 	  +--orm/
     |    +--system/
     |         +--db/
     |         +--orm/
     +--bootstrap.php
</pre>

<h2>Namespaces and class naming conventions</h2>

<p><b>System classes</b> live in the <span class="inline_code">\Glue\System\DB</span> and <span class="inline_code">\Glue\System\ORM</span> namespaces. For those classes, the auto-loader will expect a class called <span class="inline_code">\Glue\System\DB\Some_Class</span> to be located in the file <span class="inline_code">system/db/some/class.php</span> and a class called <span class="inline_code">\Glue\System\ORM\Some_Class</span> to be located in the file <span class="inline_code">system/orm/some/class.php</span>.</p>

<p><b>User defined</b> classes live in the <span class="inline_code">\Glue\DB</span> and <span class="inline_code">\Glue\ORM</span> namespaces. For those classes, the auto-loader will expect a class called <span class="inline_code">\Glue\DB\Some_Class</span> to be located in the file <span class="inline_code">db/some/class.php</span> and a class called <span class="inline_code">\Glue\ORM\Some_Class</span> to be located in the file <span class="inline_code">orm/some/class.php</span>.

<p>Additionally, although this is not required, it is a good idea to always call <span class="inline_code">A_B</span> a class <span class="inline_code">B</span> that inherits from a class <span class="inline_code">A</span> so that class names (and thus the file structure since one is bound to the other) reflect the inheritance hierarchy.</p>

<h2>Namespaces cascade</h2>

<p>If you attempt to use a class called <span class="inline_code">\Glue\DB\Some_Class</span> but no user defined class can be found, the auto-loader will load the system class <span class="inline_code">\Glue\System\DB\Some_Class</span> instead. An <a class="external" href="http://be2.php.net/manual/en/function.class-alias.php">alias</a> will be created at runtime, so that <span class="inline_code">\Glue\DB\Some_Class</span> will refer to the system class <span class="inline_code">\Glue\System\DB\Some_Class</span> .

<p>Thus, you can picture yourself the <span class="inline_code">\Glue\DB</span> and <span class="inline_code">\Glue\ORM</span> namespaces as copies of the <span class="inline_code">\Glue\System\DB</span> and <span class="inline_code">\Glue\System\ORM</span> namespaces where system classes have been replaced by user defined ones when those exist.</p>

<p>These "merged" <span class="inline_code">\Glue\DB</span> and <span class="inline_code">\Glue\ORM</span> namespaces are the only ones that will see their classes instanciated. Classes in the <span class="inline_code">\Glue\System\DB</span> and <span class="inline_code">\Glue\System\ORM</span> namespaces are fall backs that exist for the sole purpose of being imported into the <span class="inline_code">\Glue\DB</span> and <span class="inline_code">\Glue\ORM</span> namespaces when no user defined class is found.</p>

<h2>User classes creation</h2>

<p>You may want to do three things :</p>

<ul>
	<li>Creating a new class that extend a system class</li>
	<li>Overriding a system class with your own version</li>
	<li>Overriding a system class with an extension of itself</li>
</ul>

<p>The following examples assume the existence of a <span class="inline_code">\Glue\System\DB\Foo</span> system class.</p>

<h3>Creating a new class</h3>

<p>This is how you would create a <span class="inline_code">\Glue\DB\Foo_Bar</span> class that extends the <span class="inline_code">\Glue\DB\Foo</span> class : </p>

{% highlight php %}
<?php
  // File classes/db/foo/bar.php
  
  namespace \Glue\DB;
  
  class Foo_Bar extends Foo {
  
  }
?>
{% endhighlight %}

<h3>Overriding a system class with your own version</h3>

<p>This is how you would override the <span class="inline_code">\Glue\System\DB\Foo</span> class with a new class : </p>

{% highlight php %}
<?php
  // File classes/db/foo.php
  
  namespace \Glue\DB;
  
  class Foo {
  
  }
?>
{% endhighlight %}

<h3>Overriding a system class with an extension of itself</h3>

<p>This is how you would override the <span class="inline_code">\Glue\System\DB\Foo</span> class with an extension of the existing system class : </p>

{% highlight php %}
<?php
  // File classes/db/foo.php
  
  namespace \Glue\DB;
  
  class Foo extends \Glue\System\DB\Foo {
  
  }
?>
{% endhighlight %}





























