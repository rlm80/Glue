---
layout: base
title: Guide
---

Prerequisites : <a class="external" href="http://php.net/manual/en/language.oop5.autoload.php">class autoloading</a>, <a class="external" href="http://php.net/manual/en/language.namespaces.php">namespaces</a>, <a class="external" href="http://be2.php.net/manual/en/function.class-alias.php">class_alias</a>.

<h2>File system structure</h2>

<p><span class="inline_code">bootstrap.php</span> is the file is that must be included in order to use the library.</p>

<p>The classes are located in the <span class="inline_code">classes</span> directory, one class per file.</p>

<pre>
+--glue/
     +--classes/
     |    +--system/
     |    |    +--db/
     | 	  |    +--orm/
     |    +--user/
     |         +--db/
     |         +--orm/
     +--bootstrap.php
</pre>

<h2>Namespaces and class naming conventions</h2>

<p><b>System classes</b> live in the <span class="inline_code">\Glue\System</span> namespace. For those classes, the auto-loader will expect a class called <span class="inline_code">\Glue\System\DB\Some_Class</span> to be located in the file <span class="inline_code">system/db/some/class.php</span>.</p>

<p><b>User classes</b> live in the <span class="inline_code">\Glue\User</span> namespace. For those classes, the auto-loader will expect a class called <span class="inline_code">\Glue\User\DB\Some_Class</span> to be located in the file <span class="inline_code">user/db/some/class.php</span>.</p>

<p>Additionally, it is a good idea to always call <span class="inline_code">A_B</span> a class <span class="inline_code">B</span> that inherits from a class <span class="inline_code">A</span> so that class names (and thus the file system structure) reflect the inheritance hierarchy.</p>

<h2>Class aliases</h2>

<p><b>Class aliases</b> live in the <span class="inline_code">\Glue</span> namespace. By default, the alias <span class="inline_code">\Glue\A</span> points to the system class <span class="inline_code">\Glue\System\A</span>. However, if you define a user class <span class="inline_code">\Glue\User\A</span>, then the alias <span class="inline_code">\Glue\A</span> will start pointing to your <span class="inline_code">\Glue\User\A</span> class instead. In other words, a user class takes precedence over a system class of the same name.</p>

<div style="overflow: auto; text-indent: 20px; font-weight: bold">System classes (\Glue\System namespace)
	<div style="text-indent: 0px; height: 50px; float: left; width: 50px; line-height: 50px; text-align: center; background-color: yellow; border: 2px solid black; margin: 5px;">A</div>
	<div style="text-indent: 0px; height: 50px; float: left; width: 50px; line-height: 50px; text-align: center; background-color: yellow; border: 2px solid black; margin: 5px;">B</div>
	<div style="text-indent: 0px; height: 50px; float: left; width: 50px; line-height: 50px; text-align: center; background-color: yellow; border: 2px solid black; margin: 5px; visibility:hidden;">C</div>
</div>
<div style="overflow: auto; text-indent: 20px; font-weight: bold">User classes (\Glue\User namespace)
	<div style="text-indent: 0px; height: 54px; float: left; width: 54px; line-height: 54px; text-align: center; font-size: 25px; margin: 5px;">&uarr;</div>
	<div style="text-indent: 0px; height: 50px; float: left; width: 50px; line-height: 50px; text-align: center; background-color: red; border: 2px solid black; margin: 5px;">B</div>
	<div style="text-indent: 0px; height: 50px; float: left; width: 50px; line-height: 50px; text-align: center; background-color: red; border: 2px solid black; margin: 5px;">C</div>
</div>
<div style="overflow: auto; text-indent: 20px; font-weight: bold">
	<div style="text-indent: 0px; height: 25px; float: left; width: 54px; line-height: 25px; text-align: center; font-size: 25px; margin: 5px;">&uarr;</div>
	<div style="text-indent: 0px; height: 25px; float: left; width: 54px; line-height: 25px; text-align: center; font-size: 25px; margin: 5px;">&uarr;</div>
	<div style="text-indent: 0px; height: 25px; float: left; width: 54px; line-height: 25px; text-align: center; font-size: 25px; margin: 5px;">&uarr;</div>
</div>
<div style="overflow: auto; text-indent: 20px; font-weight: bold; margin : 0 0 20px 0">Class aliases (\Glue namespace)
	<div style="text-indent: 0px; height: 50px; float: left; width: 50px; line-height: 50px; text-align: center; background-color: yellow; border: 2px solid black; margin: 5px;">A</div>
	<div style="text-indent: 0px; height: 50px; float: left; width: 50px; line-height: 50px; text-align: center; background-color: red; border: 2px solid black; margin: 5px;">B</div>
	<div style="text-indent: 0px; height: 50px; float: left; width: 50px; line-height: 50px; text-align: center; background-color: red; border: 2px solid black; margin: 5px;">C</div>
</div>

<p>All over the library, only class aliases are used. There is no direct reference anywhere in the code to system classes. This means that if you want to replace every use of a system class with a use of your own class, you can do so by defining a user class with the same name as the system class. The alias will automatically point to the user class instead of the system class, and your own class will then be used throughout the library in place of the system class. You may even replace a system class with an extension of itself that overrides a few methods.</p>

<p>Please note that through this process, you can customize the library <b>without ever touching anyting in the system directory</b>. You only define classes in the user directory. This way you can upgrade to the next version of the library with no fear of losing your changes, if you made some.</p>

<p>To provide the ability to customize the library without actually touching its code is the whole point of the aliasing system.</p>

<h2>Creating user classes</h2>

<p>You may want to do three things :</p>

<ul>
	<li>Creating a new class, possibly extending a system class,</li>
	<li>Overriding a system class with your own version,</li>
	<li>Overriding a system class with an extension of itself.</li>
</ul>

<p>The following examples assume the existence of a system class <span class="inline_code">\Glue\System\DB\Foo</span>.</p>

<h3><a name="create_new_class">Creating a new class</a></h3>

<p>This is how you would create a <span class="inline_code">\Glue\User\DB\Foo_Bar</span> user class that extends the <span class="inline_code">\Glue\DB\Foo</span> class. This is what you do when you want to add something to the library, rather than modifying it.</p>

{% highlight php %}
<?php
  // File classes/user/db/foo/bar.php
  
  namespace Glue\User\DB;
  
  class Foo_Bar extends \Glue\DB\Foo {
  
  }
?>
{% endhighlight %}

<p>In the code above, notice the use of the <span class="inline_code">\Glue\DB\Foo</span> alias. This way, if the system class <span class="inline_code">\Glue\System\DB\Foo</span> is ever overriden by the user class <span class="inline_code">\Glue\User\DB\Foo</span>, your code will automatically benefit from the change with the rest of the library.</p>

<h3>Overriding a system class with your own version</h3>

<p>This is how you would completly replace the <span class="inline_code">\Glue\System\DB\Foo</span> class with a new class of your own. The alias <span class="inline_code">\Glue\DB\Foo</span> will now point to your own class instead of the system one and your class will be used everywhere in its stead.</p>

{% highlight php %}
<?php
  // File classes/user/db/foo.php
  
  namespace Glue\User\DB;
  
  class Foo {
  
  }
?>
{% endhighlight %}

<p>You normally wouldn't want to do this. Instead, you'd rather build your new class upon the existing system class, possibly overriding a few methods :</p>

<h3><a name="override_with_extension">Overriding a system class with an extension of itself</a></h3>

<p>This is how you would override the <span class="inline_code">\Glue\System\DB\Foo</span> class with an extension of the existing system class : </p>

{% highlight php %}
<?php
  // File classes/user/db/foo.php
  
  namespace Glue\User\DB;
  
  class Foo extends \Glue\System\DB\Foo {
  
  }
?>
{% endhighlight %}





























